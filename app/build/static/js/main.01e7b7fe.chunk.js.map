{"version":3,"sources":["_components/PrivateRoute.js","_components/TableComponent.js","_components/Map.js","_helpers/auth-header.js","_services/user.service.js","HomePage/HomePage.js","LoginPage/LoginPage.js","App/App.js","_helpers/fake-backend.js","index.js"],"names":["PrivateRoute","Component","component","rest","render","props","localStorage","getItem","to","pathname","state","from","location","TableComponent","loadingDownloadLink","downloadLink","downloadLeadNumber","downloadData","url","Map","newPolygon","editPolygonDetails","name","layer","tableData","columns","rows","currentPolygonsInView","currentPolygonLabels","id","this","editPolygon","data","handleShow","bind","handleEdit","handleDelete","className","onClick","createNewPolygon","style","marginTop","for","type","aria-describedby","placeholder","value","onChange","e","setState","target","submitNewPolygon","cancelNewPolygon","submitEditedPolygon","cancelEditedPolygon","run","_id","isSelected","checked","selectedData","find","item","toString","renderSelectedPolygon","a","removeAllPolygonsFromMap","enablePolygonEditControl","editableLayers","addLayer","window","confirm","deleteGroup","filter","console","error","alert","polygon","addPolygonAndLabelToMap","removePolygonAndLabelFromMap","Promise","resolve","_parentId","addTo","mapElement","label","L","Label","setContent","setLatLng","getBounds","getCenter","bindLabel","showLabel","prevState","removeLayer","reject","forEach","saveGroup","addNewPolygon","resetForm","disablePolygonEditControl","Error","log","updateGroup","addEditedPolygon","GeoJSON","geometryToLayer","geoJSON","map","Object","assign","onLoad","addControls","getGroups","groups","length","populateGroups","axios","get","then","res","catch","err","polygonDetails","toGeoJSON","geometry","group","post","put","delete","message","default","validatedData","isNaN","Number","lat","lng","postcode","result","latitude","longitude","getE5Engineers","arrayContent","markers","marker","icon","markerIcon","bindPopup","markerPopupContent","push","circles","circle","color","opacity","fillColor","fillOpacity","getAccepted","getBoilerJobs","markerLayer","markerClusterGroup","getServiceJobs","getLeads","addressPoints","p","heat","heatLayer","radius","minOpacity","content","tableContent","keys","k","iconUrl","iconSize","iconAnchor","popupAnchor","removeE5Engineers","e5EngineerCircle","e5EngineerMarkers","e5Engineer","acceptedCircle","acceptedMarkers","accepted","serviceJob","clusters","serviceJobCluster","lead","leadCluster","boilerJob","boilerJobCluster","serviceJobsHeatMap","leadsHeatMap","boilerJobsHeatMap","control","custom","position","classes","events","click","srcElement","renderLeads","removeLeads","renderLeadsHeatMap","removeLeadsHeatMap","renderE5Engineers","renderE5EngineerCircles","removeE5EngineerCircles","renderAccepted","removeAccepted","renderAcceptedCircles","removeAcceptedCircles","FeatureGroup","drawPluginOptions","draw","allowIntersection","drawError","shapeOptions","polyline","rectangle","edit","featureGroup","remove","drawControl","Control","Draw","on","layers","eachLayer","addControl","removeControl","$","config","loading","loaded","areas","districts","sectors","geoJsonLayerOptions","shapeStyle","onEachFeature","feature","setStyle","randomRange","properties","noHide","layerAreas","geoJson","layerDistricts","layerSectors","layerGoogle","tileLayer","maxZoom","subdomains","layerOSM","openStreetMap","attribution","zoom","max","tileMaps","RAZRMAPS","overlayMaps","Areas","Districts","Sectors","center","sidebar","closeButton","min","Math","floor","random","sidebarElement","collapsed","initEditableLayer","initDrawControls","onAdd","div","DomUtil","create","innerHTML","getJSON","files","addData","features","html","statusText","show","hide","authHeader","user","JSON","parse","authdata","userService","login","username","password","requestOptions","method","headers","body","stringify","fetch","handleResponse","btoa","setItem","logout","getAll","removeItem","response","text","ok","status","reload","HomePage","users","React","LoginPage","submitted","handleChange","handleSubmit","preventDefault","returnUrl","history","onSubmit","disabled","src","App","exact","path","firstName","lastName","realFetch","opts","setTimeout","endsWith","params","filteredUsers","responseJson","Authorization","configureFakeBackend","document","getElementById"],"mappings":"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","file":"static/js/main.01e7b7fe.chunk.js","sourcesContent":["import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\n\nexport const PrivateRoute = ({ component: Component, ...rest }) => (\n    <Route {...rest} render={props => (\n        localStorage.getItem('user')\n            ? <Component {...props} />\n            : <Redirect to={{ pathname: '/login', state: { from: props.location } }} />\n    )} />\n)","import React, { Component } from \"react\";\r\n\r\nimport { CSVLink } from \"react-csv\";\r\n\r\nimport classifyPoint from \"robust-point-in-polygon\";\r\n\r\nclass TableComponent extends Component {\r\n  state = {\r\n    loadingDownloadLink: false,\r\n    downloadLink: false,\r\n    downloadLeadNumber: null,\r\n    downloadData: [],\r\n  };\r\n  render() {\r\n    return <div></div>;\r\n  }\r\n}\r\n\r\nexport default TableComponent;\r\n","import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport \"./Map.css\";\n\nimport TableComponent from \"./TableComponent\";\n\n// const url = `http://localhost:4000/api/group`;\nconst url = `https://map247.razrlab.com/api/group`;\n\nclass Map extends Component {\n  state = {\n    newPolygon: false,\n    editPolygonDetails: {\n      name: \"\",\n      layer: null,\n    },\n    tableData: {\n      columns: [\"name\"],\n      rows: [],\n    },\n    currentPolygonsInView: [],\n    currentPolygonLabels: [],\n  };\n\n  render() {\n    return (\n      <div>\n        <div id=\"map\"></div>\n        <div id=\"sidebar\">\n          {!this.state.newPolygon && !this.state.editPolygon && (\n            <div>\n              <h3>Groups</h3>\n              <TableComponent\n                data={this.state.tableData}\n                handleShow={this.handleShow.bind(this)}\n                handleEdit={this.handleEdit.bind(this)}\n                handleDelete={this.handleDelete.bind(this)}\n              />\n              <button\n                className=\"btn btn-primary\"\n                onClick={() => {\n                  this.createNewPolygon();\n                }}\n              >\n                Create New\n              </button>\n            </div>\n          )}\n\n          {this.state.newPolygon && (\n            <div>\n              <div className=\"row\" style={{ marginTop: \"5vh\" }}>\n                <div className=\"form-group\">\n                  <label for=\"exampleInputEmail1\">Group Name</label>\n                  <input\n                    type=\"text\"\n                    className=\"form-control\"\n                    id=\"exampleInputEmail1\"\n                    aria-describedby=\"emailHelp\"\n                    placeholder=\"Enter Name\"\n                    value={this.state.editPolygonDetails.name}\n                    onChange={(e) => {\n                      this.setState({\n                        editPolygonDetails: {\n                          ...this.state.editPolygonDetails,\n                          name: e.target.value,\n                        },\n                      });\n                    }}\n                  ></input>\n                  <small id=\"emailHelp\" className=\"form-text text-muted\">\n                    Please enter a unqiue group name.\n                  </small>\n                </div>\n                <button\n                  className=\"btn btn-dark\"\n                  onClick={() => {\n                    this.submitNewPolygon();\n                  }}\n                >\n                  Save\n                </button>{\" \"}\n                <button\n                  className=\"btn btn-danger\"\n                  onClick={() => {\n                    this.cancelNewPolygon();\n                  }}\n                >\n                  Cancel\n                </button>\n              </div>\n            </div>\n          )}\n\n          {this.state.editPolygon && (\n            <div>\n              <div className=\"row\" style={{ marginTop: \"5vh\" }}>\n                <div className=\"form-group\">\n                  <label for=\"exampleInputEmail1\">Group Name</label>\n                  <input\n                    type=\"text\"\n                    className=\"form-control\"\n                    id=\"exampleInputEmail1\"\n                    aria-describedby=\"emailHelp\"\n                    placeholder=\"Enter Name\"\n                    value={this.state.editPolygonDetails.name}\n                    onChange={(e) => {\n                      this.setState({\n                        editPolygonDetails: {\n                          ...this.state.editPolygonDetails,\n                          name: e.target.value,\n                        },\n                      });\n                    }}\n                  ></input>\n                  <small id=\"emailHelp\" className=\"form-text text-muted\">\n                    Please enter a unqiue group name.\n                  </small>\n                </div>\n                <button\n                  className=\"btn btn-dark\"\n                  onClick={() => {\n                    this.submitEditedPolygon();\n                  }}\n                >\n                  Save\n                </button>{\" \"}\n                <button\n                  className=\"btn btn-danger\"\n                  onClick={() => {\n                    this.cancelEditedPolygon();\n                  }}\n                >\n                  Cancel\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    this.run();\n  }\n\n  handleShow(e) {\n    const _id = e.target.value;\n    const isSelected = e.target.checked;\n    const selectedData = this.state.tableData.rows.find((item) => {\n      return _id.toString() === item._id.toString();\n    });\n    if (selectedData && selectedData.layer)\n      this.renderSelectedPolygon(selectedData, isSelected);\n  }\n\n  async handleEdit(e) {\n    // debugger;\n    const _id = e.target.value;\n    const isSelected = true;\n    const selectedData = this.state.tableData.rows.find((item) => {\n      return _id.toString() === item._id.toString();\n    });\n    if (selectedData && selectedData.layer) {\n      await this.removeAllPolygonsFromMap();\n      await this.renderSelectedPolygon(selectedData, isSelected);\n      //enable controls and add poly to editable layer\n      this.enablePolygonEditControl();\n      this.editableLayers.addLayer(selectedData.layer);\n      this.setState({\n        editPolygon: true,\n        editPolygonDetails: {\n          _id: _id,\n          name: selectedData.name,\n          layer: selectedData.layer,\n        },\n      });\n    }\n  }\n\n  async handleDelete(e) {\n    const _id = e.target.value;\n    const confirmed = window.confirm(`Are you sure you want to delete?`);\n    if (confirmed) {\n      try {\n        //deselect the layer\n        const isSelected = false;\n\n        const selectedData = this.state.tableData.rows.find((item) => {\n          return _id.toString() === item._id.toString();\n        });\n        if (selectedData && selectedData.layer) {\n          this.renderSelectedPolygon(selectedData, isSelected);\n        }\n\n        const deletedGroup = await this.deleteGroup(selectedData);\n\n        if (deletedGroup) {\n          const rows = this.state.tableData.rows.filter((item) => {\n            return item._id && _id && item._id.toString() !== _id.toString();\n          });\n          this.setState({\n            tableData: {\n              ...this.state.tableData,\n              rows: rows,\n            },\n          });\n        }\n      } catch (err) {\n        console.error(err);\n        alert(\"An error occurred while deleting...\");\n      }\n    }\n  }\n\n  async renderSelectedPolygon(data, isSelected) {\n    if (data.layer) {\n      const polygon = data.layer;\n      if (isSelected) {\n        await this.addPolygonAndLabelToMap(data, polygon);\n      } else {\n        await this.removePolygonAndLabelFromMap(data, polygon);\n      }\n    }\n  }\n\n  addPolygonAndLabelToMap(data, polygon) {\n    return new Promise((resolve) => {\n      //add to map\n      polygon._parentId = data._id;\n      polygon.addTo(this.mapElement);\n      //add label to map\n      const label = new window.L.Label();\n      label.setContent(data.name);\n      label.setLatLng(polygon.getBounds().getCenter());\n      label._parentId = data._id;\n      polygon.bindLabel(label);\n      this.mapElement.showLabel(label);\n      //save state\n      this.setState((prevState) => ({\n        currentPolygonsInView: [...prevState.currentPolygonsInView, polygon],\n        currentPolygonLabels: [...prevState.currentPolygonLabels, label],\n      }));\n      resolve();\n    });\n  }\n\n  removePolygonAndLabelFromMap(data, polygon) {\n    return new Promise((resolve) => {\n      const label = this.state.currentPolygonLabels.find((item) => {\n        return (\n          item._parentId &&\n          data._id &&\n          item._parentId.toString() === data._id.toString()\n        );\n      });\n\n      //remove them from the map\n      if (label) this.mapElement.removeLayer(label);\n      if (polygon) this.mapElement.removeLayer(polygon);\n\n      const currentPolygonsInView = this.state.currentPolygonsInView.filter(\n        (item) =>\n          item._parentId &&\n          label._parentId &&\n          item._parentId.toString() !== label._parentId.toString()\n      );\n      const currentPolygonLabels = this.state.currentPolygonLabels.filter(\n        (item) =>\n          item._parentId &&\n          label._parentId &&\n          item._parentId.toString() !== label._parentId.toString()\n      );\n\n      //save state\n      this.setState({\n        currentPolygonsInView: currentPolygonsInView,\n        currentPolygonLabels: currentPolygonLabels,\n      });\n      resolve();\n    });\n  }\n\n  removeAllPolygonsFromMap() {\n    return new Promise((resolve, reject) => {\n      const polygonLayers = this.state.currentPolygonsInView;\n      polygonLayers.forEach((item) => {\n        this.mapElement.removeLayer(item);\n      });\n      const polygonLabels = this.state.currentPolygonLabels;\n      polygonLabels.forEach((item) => {\n        this.mapElement.removeLayer(item);\n      });\n\n      //save new state\n      this.setState({\n        currentPolygonsInView: [],\n        currentPolygonLabels: [],\n      });\n      resolve();\n    });\n  }\n\n  async createNewPolygon() {\n    await this.removeAllPolygonsFromMap();\n    this.setState({\n      newPolygon: true,\n    });\n    this.enablePolygonEditControl();\n  }\n\n  async submitNewPolygon() {\n    try {\n      if (\n        this.state.editPolygonDetails.name !== \"\" &&\n        this.state.editPolygonDetails.layer\n      ) {\n        //name validation\n        const existingName = this.state.tableData.rows.find(\n          (item) => item.name === this.state.editPolygonDetails.name\n        );\n        if (existingName) {\n          alert(`Name already exists`);\n          return;\n        }\n\n        const newPolygon = await this.saveGroup(this.state.editPolygonDetails);\n\n        if (newPolygon) {\n          await this.addNewPolygon(newPolygon);\n          this.resetForm();\n          this.disablePolygonEditControl();\n          await this.removeAllPolygonsFromMap();\n        } else {\n          throw new Error(`new polygon not returned`);\n        }\n      } else {\n        alert(`Please input a valid name and shape`);\n      }\n    } catch (err) {\n      console.log(err);\n      alert(`An error occurred while editing`);\n    }\n  }\n\n  async submitEditedPolygon() {\n    try {\n      if (\n        this.state.editPolygonDetails.name !== \"\" &&\n        this.state.editPolygonDetails.layer\n      ) {\n        //name validation\n        const existingName = this.state.tableData.rows.find(\n          (item) =>\n            item.name === this.state.editPolygonDetails.name &&\n            item._id.toString() !== this.state.editPolygonDetails._id.toString()\n        );\n        if (existingName) {\n          alert(`Name already exists`);\n          return;\n        }\n\n        const newPolygon = await this.updateGroup(\n          this.state.editPolygonDetails\n        );\n\n        if (newPolygon) {\n          await this.addEditedPolygon(newPolygon);\n          this.resetForm();\n          this.disablePolygonEditControl();\n          await this.removeAllPolygonsFromMap();\n        } else {\n          throw new Error(\"new polygon not returned\");\n        }\n      } else {\n        alert(`Please input a valid name and shape`);\n      }\n    } catch (err) {\n      console.error(err);\n      alert(`An error occurred while editing`);\n    }\n  }\n\n  addNewPolygon(data) {\n    return new Promise((resolve, reject) => {\n      this.setState({\n        tableData: {\n          rows: [\n            ...this.state.tableData.rows,\n            {\n              _id: data._id,\n              name: data.name,\n              layer: data.layer\n                ? data.layer\n                : window.L.GeoJSON.geometryToLayer(data.geoJSON),\n            },\n          ],\n        },\n      });\n      resolve();\n    });\n  }\n\n  addEditedPolygon(data) {\n    return new Promise((resolve, reject) => {\n      const rows = this.state.tableData.rows.map((item) => {\n        if (\n          this.state.editPolygonDetails._id.toString() === item._id.toString()\n        ) {\n          return Object.assign(item, {\n            name: this.state.editPolygonDetails.name,\n            layer: this.state.editPolygonDetails.layer,\n          });\n        } else {\n          return item;\n        }\n      });\n\n      this.setState({\n        tableData: {\n          rows: rows,\n        },\n      });\n      resolve();\n    });\n  }\n\n  cancelNewPolygon() {\n    this.resetForm();\n    this.removeAllPolygonsFromMap();\n    this.disablePolygonEditControl();\n  }\n\n  cancelEditedPolygon() {\n    this.resetForm();\n    this.removeAllPolygonsFromMap();\n    this.disablePolygonEditControl();\n  }\n\n  resetForm() {\n    this.setState({\n      newPolygon: false,\n      editPolygon: false,\n      editPolygonDetails: {\n        name: \"\",\n        layer: null,\n      },\n    });\n  }\n\n  async run() {\n    await this.onLoad();\n    this.addControls();\n    const groups = await this.getGroups();\n    if (groups && groups.length) {\n      this.populateGroups(groups);\n    }\n  }\n\n  populateGroups(groups) {\n    if (groups && groups.length) {\n      const data = groups\n        .filter((item) => {\n          return item.name && item.geoJSON && item._id;\n        })\n        .map((item) => {\n          item.layer = window.L.GeoJSON.geometryToLayer(item.geoJSON);\n          return item;\n        });\n      this.setState({\n        tableData: {\n          ...this.state.tableData,\n          rows: data,\n        },\n      });\n    }\n  }\n\n  getGroups() {\n    return new Promise((resolve, reject) => {\n      axios\n        .get(url)\n        .then((res) => {\n          if (res && res.data && res.data.data) {\n            resolve(res.data.data);\n          } else {\n            reject(new Error(\"There is no data\"));\n          }\n          resolve();\n        })\n        .catch((err) => {\n          reject(err);\n        });\n    });\n  }\n\n  saveGroup(polygonDetails) {\n    return new Promise((resolve, reject) => {\n      if (\n        polygonDetails &&\n        polygonDetails &&\n        polygonDetails.layer &&\n        polygonDetails.name &&\n        polygonDetails.layer.toGeoJSON() &&\n        polygonDetails.layer.toGeoJSON().geometry\n      ) {\n        let group = Object.assign({}, polygonDetails);\n        if (!group.geoJSON) {\n          group.geoJSON = group.layer.toGeoJSON().geometry;\n          delete group.layer;\n        }\n        axios\n          .post(url, group)\n          .then((res) => {\n            if (res && res.data && res.data.data) {\n              resolve(res.data.data);\n            } else {\n              reject(new Error(\"There is no data\"));\n            }\n          })\n          .catch((err) => {\n            reject(err);\n          });\n      } else {\n        reject(new Error(`Insufficient parameters are being sent`));\n      }\n    });\n  }\n\n  updateGroup(polygonDetails) {\n    return new Promise((resolve, reject) => {\n      if (\n        polygonDetails &&\n        polygonDetails &&\n        polygonDetails.layer &&\n        polygonDetails.name &&\n        polygonDetails.layer.toGeoJSON() &&\n        polygonDetails.layer.toGeoJSON().geometry\n      ) {\n        let group = Object.assign({}, polygonDetails);\n        if (!group.geoJSON) {\n          group.geoJSON = group.layer.toGeoJSON().geometry;\n          delete group.layer;\n        }\n        axios\n          .put(url, group)\n          .then((res) => {\n            if (res && res.data && res.data.data) {\n              resolve(res.data.data);\n            } else {\n              reject(new Error(\"There is no data\"));\n            }\n          })\n          .catch((err) => {\n            reject(err);\n          });\n      } else {\n        reject(new Error(`Insufficient parameters are being sent`));\n      }\n    });\n  }\n\n  deleteGroup(group) {\n    return new Promise((resolve, reject) => {\n      axios\n        .delete(url, {\n          data: {\n            _id: group._id,\n          },\n        })\n        .then((res) => {\n          if (res && res.data && res.data.message) {\n            resolve(res.data.message);\n          } else {\n            reject(new Error(\"There is no data\"));\n          }\n          resolve();\n        })\n        .catch((err) => {\n          reject(err);\n        });\n    });\n  }\n\n  getLeads() {\n    return new Promise((resolve, reject) => {\n      import(\"../rawdata/data.json\")\n        .then((data) => {\n          if (data && data.default) {\n            const validatedData = data.default.filter((item) => {\n              return !isNaN(Number(item.lat)) && !isNaN(Number(item.lng));\n            });\n            console.log(`render leads ${validatedData.length}`);\n            resolve(validatedData);\n          } else {\n            resolve([]);\n          }\n        })\n        .catch((err) => {\n          reject(err);\n        });\n    });\n  }\n\n  getE5Engineers() {\n    return new Promise((resolve, reject) => {\n      import(\"../rawdata/rejections.json\")\n        .then((data) => {\n          if (data && data.default) {\n            const refinedData = data.default.map((item) => {\n              return {\n                postcode: item?.result?.postcode,\n                lat: item?.result?.latitude,\n                lng: item?.result?.longitude,\n              };\n            });\n            const validatedData = refinedData.filter((item) => {\n              return !isNaN(Number(item.lat)) && !isNaN(Number(item.lng));\n            });\n            resolve(validatedData);\n          } else {\n            resolve([]);\n          }\n        })\n        .catch((err) => {\n          reject(err);\n        });\n    });\n  }\n\n  async renderE5Engineers() {\n    const type = \"e5Engineer\";\n    try {\n      const arrayContent = await this.getE5Engineers();\n      if (arrayContent && arrayContent.length) {\n        let markers = [];\n        arrayContent.forEach((item) => {\n          if (item.lat && item.lng) {\n            const marker = window.L.marker([item.lat, item.lng], {\n              icon: this.markerIcon(type),\n            }).addTo(this.mapElement);\n            marker.bindPopup(this.markerPopupContent(type, item));\n            markers.push(marker);\n          }\n        });\n        this.setState({\n          [type]: markers,\n        });\n      } else {\n        throw new Error(`No ${type} to be rendered`);\n      }\n    } catch (err) {\n      console.error(err);\n      alert(`Error while rendering ${type}`);\n    }\n  }\n\n  async renderE5EngineerCircles() {\n    const type = \"e5Engineer\";\n    try {\n      const arrayContent = await this.getE5Engineers();\n      if (arrayContent && arrayContent.length) {\n        let circles = [];\n        arrayContent.forEach((item) => {\n          if (item.lat && item.lng) {\n            let circle = window.L.circle([item.lat, item.lng], 1609.34, {\n              color: \"#000\",\n              opacity: 1,\n              fillColor: \"#000\",\n              fillOpacity: 1,\n            }).addTo(this.mapElement);\n            circles.push(circle);\n          }\n        });\n        this.setState({\n          [`${type}Circle`]: circles,\n        });\n      } else {\n        throw new Error(`No ${type} to be rendered`);\n      }\n    } catch (err) {\n      console.error(err);\n      alert(`Error while rendering ${type}`);\n    }\n  }\n\n  getAccepted() {\n    return new Promise((resolve, reject) => {\n      import(\"../rawdata/accepted.json\")\n        .then((data) => {\n          if (data && data.default) {\n            const refinedData = data.default.map((item) => {\n              return {\n                postcode: item?.result?.postcode,\n                lat: item?.result?.latitude,\n                lng: item?.result?.longitude,\n              };\n            });\n            const validatedData = refinedData.filter((item) => {\n              return !isNaN(Number(item.lat)) && !isNaN(Number(item.lng));\n            });\n            resolve(validatedData);\n          } else {\n            resolve([]);\n          }\n        })\n        .catch((err) => {\n          reject(err);\n        });\n    });\n  }\n\n  async renderAccepted() {\n    const type = \"accepted\";\n    try {\n      const arrayContent = await this.getAccepted();\n      if (arrayContent && arrayContent.length) {\n        let markers = [];\n        arrayContent.forEach((item) => {\n          if (item.lat && item.lng) {\n            const marker = window.L.marker([item.lat, item.lng], {\n              icon: this.markerIcon(type),\n            }).addTo(this.mapElement);\n            marker.bindPopup(this.markerPopupContent(type, item));\n            markers.push(marker);\n          }\n        });\n        this.setState({\n          [type]: markers,\n        });\n      } else {\n        throw new Error(`No ${type} to be rendered`);\n      }\n    } catch (err) {\n      console.error(err);\n      alert(`Error while rendering ${type}`);\n    }\n  }\n\n  async renderAcceptedCircles() {\n    const type = \"accepted\";\n    try {\n      const arrayContent = await this.getAccepted();\n      if (arrayContent && arrayContent.length) {\n        let circles = [];\n        arrayContent.forEach((item) => {\n          if (item.lat && item.lng) {\n            let circle = window.L.circle([item.lat, item.lng], 1609.34, {\n              color: \"purple\",\n              opacity: 1,\n              fillColor: \"purple\",\n              fillOpacity: 1,\n            }).addTo(this.mapElement);\n            circles.push(circle);\n          }\n        });\n        this.setState({\n          [`${type}Circle`]: circles,\n        });\n      } else {\n        throw new Error(`No ${type} to be rendered`);\n      }\n    } catch (err) {\n      console.error(err);\n      alert(`Error while rendering ${type}`);\n    }\n  }\n\n  async renderBoilerJobs() {\n    const type = \"boilerJob\";\n    try {\n      const arrayContent = await this.getBoilerJobs();\n      if (arrayContent && arrayContent.length) {\n        let markerLayer = window.L.markerClusterGroup();\n        let markers = [];\n        arrayContent.forEach((item) => {\n          if (item.lat && item.lng) {\n            const marker = window.L.marker([item.lat, item.lng], {\n              icon: this.markerIcon(type),\n            });\n            marker.bindPopup(this.markerPopupContent(type, item));\n            markerLayer.addLayer(marker);\n            markers.push(marker);\n          }\n        });\n        markerLayer.addTo(this.mapElement);\n        this.setState({\n          [`${type}Cluster`]: markerLayer,\n          [type]: markers,\n        });\n      } else {\n        throw new Error(`No ${type} to be rendered`);\n      }\n    } catch (err) {\n      console.error(err);\n      alert(`Error while rendering ${type}`);\n    }\n  }\n\n  async renderServiceJobs() {\n    const type = \"serviceJob\";\n    try {\n      const arrayContent = await this.getServiceJobs();\n      if (arrayContent && arrayContent.length) {\n        let markerLayer = window.L.markerClusterGroup();\n        let markers = [];\n        arrayContent.forEach((item) => {\n          if (item.lat && item.lng) {\n            const marker = window.L.marker([item.lat, item.lng], {\n              icon: this.markerIcon(type),\n            });\n            marker.bindPopup(this.markerPopupContent(type, item));\n            markerLayer.addLayer(marker);\n            markers.push(marker);\n          }\n        });\n        markerLayer.addTo(this.mapElement);\n        this.setState({\n          [`${type}Cluster`]: markerLayer,\n          [type]: markers,\n        });\n      } else {\n        throw new Error(`No ${type} to be rendered`);\n      }\n    } catch (err) {\n      console.error(err);\n      alert(`Error while rendering ${type}`);\n    }\n  }\n\n  async renderLeads() {\n    const type = \"lead\";\n    try {\n      const arrayContent = await this.getLeads();\n      if (arrayContent && arrayContent.length) {\n        let markerLayer = window.L.markerClusterGroup();\n        let markers = [];\n        arrayContent.forEach((item) => {\n          if (item.lat && item.lng) {\n            const marker = window.L.marker([item.lat, item.lng], {\n              icon: this.markerIcon(type),\n            });\n            marker.bindPopup(this.markerPopupContent(type, item));\n            markerLayer.addLayer(marker);\n            markers.push(marker);\n          }\n        });\n        markerLayer.addTo(this.mapElement);\n        this.setState({\n          [`${type}Cluster`]: markerLayer,\n          [type]: markers,\n        });\n      } else {\n        throw new Error(`No ${type} to be rendered`);\n      }\n    } catch (err) {\n      console.error(err);\n      alert(`Error while rendering ${type}`);\n    }\n  }\n\n  async renderServiceJobsHeatMap() {\n    const type = \"serviceJob\";\n    const arrayContent = await this.getServiceJobs();\n    const addressPoints = arrayContent.map(function (p) {\n      return [p.lat, p.lng, 0.5];\n    });\n    const heat = window.L.heatLayer(addressPoints, {\n      radius: 10,\n      minOpacity: 1,\n    }).addTo(this.mapElement);\n    this.setState({\n      [`${type}sHeatMap`]: heat,\n    });\n    try {\n    } catch (err) {\n      console.error(err);\n      alert(`Error while rendering ${type}`);\n    }\n  }\n\n  async renderLeadsHeatMap() {\n    const type = \"lead\";\n    const arrayContent = await this.getLeads();\n    const addressPoints = arrayContent.map(function (p) {\n      return [Number(p.lat), Number(p.lng), 0.5];\n    });\n    const heat = window.L.heatLayer(addressPoints, {\n      radius: 10,\n      minOpacity: 1,\n    }).addTo(this.mapElement);\n    this.setState({\n      [`${type}sHeatMap`]: heat,\n    });\n    try {\n    } catch (err) {\n      console.error(err);\n      alert(`Error while rendering ${type}`);\n    }\n  }\n\n  async renderBoilerJobsHeatMap() {\n    const type = \"boilerJob\";\n    const arrayContent = await this.getBoilerJobs();\n    const addressPoints = arrayContent.map(function (p) {\n      return [p.lat, p.lng, 0.5];\n    });\n    const heat = window.L.heatLayer(addressPoints, {\n      radius: 10,\n      minOpacity: 1,\n    }).addTo(this.mapElement);\n    this.setState({\n      [`${type}sHeatMap`]: heat,\n    });\n    try {\n    } catch (err) {\n      console.error(err);\n      alert(`Error while rendering ${type}`);\n    }\n  }\n\n  markerPopupContent(type, item) {\n    let content = \"\";\n    let tableContent = \"\";\n    Object.keys(item).forEach((k) => {\n      tableContent =\n        tableContent +\n        `\n      <tr>\n      <td class=\"popup-table-row\">\n      <td>${k}</td>\n      <td>${item[k]}</td>\n      </td>\n        </tr>\n        `;\n    });\n    if (tableContent) {\n      content = `\n      <table class=\"table table-dark\">\n      ${tableContent}\n      </table>\n      `;\n    }\n    return content;\n  }\n\n  markerIcon(type) {\n    //   \"https://res.cloudinary.com/razrlab/image/upload/c_scale,co_rgb:D12711,e_colorize:100,f_png/v1541359481/pin_t5dc4n.png\",\n    let icon = \"\";\n    switch (type) {\n      case \"e5Engineer\":\n        icon =\n          \"https://res.cloudinary.com/razrlab/image/upload/v1571935748/person-marker_wdvvbm.png\";\n        break;\n      // case \"accepted\":\n      //   icon =\n      //     \"https://res.cloudinary.com/razrlab/image/upload/v1571935748/service-marker_tzrx0s.png\";\n      //   break;\n      case \"lead\":\n      case \"accepted\":\n        icon =\n          \"https://res.cloudinary.com/razrlab/image/upload/v1571935748/home-marker_sskts6.png\";\n        break;\n      default:\n        //nothing\n        break;\n    }\n    const iconElement = window.L.icon({\n      iconUrl: icon,\n      iconSize: [25, 25],\n      iconAnchor: [12, 25],\n      popupAnchor: [3, -40],\n    });\n\n    return iconElement;\n  }\n\n  removeMarkers() {\n    return new Promise((resolve, reject) => {\n      this.removeE5Engineers();\n      resolve();\n    });\n  }\n\n  removeE5EngineerCircles() {\n    let circles = this.state.e5EngineerCircle;\n    if (circles && circles.length) {\n      circles.forEach((item) => {\n        this.mapElement.removeLayer(item);\n      });\n    }\n  }\n\n  removeE5Engineers() {\n    let e5EngineerMarkers = this.state.e5Engineer;\n    if (e5EngineerMarkers && e5EngineerMarkers.length) {\n      e5EngineerMarkers.forEach((item) => {\n        this.mapElement.removeLayer(item);\n      });\n    }\n  }\n\n  removeAcceptedCircles() {\n    let circles = this.state.acceptedCircle;\n    if (circles && circles.length) {\n      circles.forEach((item) => {\n        this.mapElement.removeLayer(item);\n      });\n    }\n  }\n\n  removeAccepted() {\n    let acceptedMarkers = this.state.accepted;\n    if (acceptedMarkers && acceptedMarkers.length) {\n      acceptedMarkers.forEach((item) => {\n        this.mapElement.removeLayer(item);\n      });\n    }\n  }\n\n  removeServiceJobs() {\n    let markers = this.state.serviceJob;\n    let clusters = this.state.serviceJobCluster;\n    if (markers && markers.length) {\n      markers.forEach((item) => {\n        this.mapElement.removeLayer(item);\n      });\n      clusters && this.mapElement.removeLayer(clusters);\n    }\n  }\n\n  removeLeads() {\n    let markers = this.state.lead;\n    let clusters = this.state.leadCluster;\n    if (markers && markers.length) {\n      markers.forEach((item) => {\n        this.mapElement.removeLayer(item);\n      });\n      clusters && this.mapElement.removeLayer(clusters);\n    }\n  }\n\n  removeBoilerJobs() {\n    let markers = this.state.boilerJob;\n    let clusters = this.state.boilerJobCluster;\n    if (markers && markers.length) {\n      markers.forEach((item) => {\n        this.mapElement.removeLayer(item);\n      });\n      clusters && this.mapElement.removeLayer(clusters);\n    }\n  }\n\n  removeServiceJobsHeatMap() {\n    const layer = this.state.serviceJobsHeatMap;\n    layer && this.mapElement.removeLayer(layer);\n  }\n\n  removeLeadsHeatMap() {\n    const layer = this.state.leadsHeatMap;\n    layer && this.mapElement.removeLayer(layer);\n  }\n\n  removeBoilerJobsHeatMap() {\n    const layer = this.state.boilerJobsHeatMap;\n    layer && this.mapElement.removeLayer(layer);\n  }\n  addControls() {\n    const L = window.L;\n    L.control\n      .custom({\n        position: \"bottomleft\",\n        content: `\n        <div class=\"panel-body\">\n          <div class=\"checkbox\">\n            <label><input type=\"checkbox\" value=\"e5Engineers\">Rejections</label>\n          </div>\n          <div class=\"checkbox\">\n            <label><input type=\"checkbox\" value=\"e5EngineerCircles\">Rejection Boundaries</label>\n          </div>\n          <div class=\"checkbox\">\n            <label><input type=\"checkbox\" value=\"accepted\">Accepted</label>\n          </div>\n          <div class=\"checkbox\">\n            <label><input type=\"checkbox\" value=\"acceptedCircles\">Accepted Boundaries</label>\n          </div>\n          <div class=\"checkbox\">\n          <label><input type=\"checkbox\" value=\"leadsHeatMap\">Care Homes Heat Map</label>\n          </div>\n          <div class=\"checkbox\">\n            <label><input type=\"checkbox\" value=\"leads\">Care Homes</label>\n          </div>\n        </div>\n        `,\n        classes: \"panel panel-default\",\n        style: {},\n        events: {\n          click: (data) => {\n            if (data && data.srcElement && data.srcElement.type) {\n              switch (data.srcElement.value) {\n                case \"leads\":\n                  data.srcElement.checked\n                    ? this.renderLeads()\n                    : this.removeLeads();\n                  break;\n                case \"leadsHeatMap\":\n                  data.srcElement.checked\n                    ? this.renderLeadsHeatMap()\n                    : this.removeLeadsHeatMap();\n                  break;\n                case \"e5Engineers\":\n                  data.srcElement.checked\n                    ? this.renderE5Engineers()\n                    : this.removeE5Engineers();\n                  break;\n                case \"e5EngineerCircles\":\n                  data.srcElement.checked\n                    ? this.renderE5EngineerCircles()\n                    : this.removeE5EngineerCircles();\n                  break;\n                case \"accepted\":\n                  data.srcElement.checked\n                    ? this.renderAccepted()\n                    : this.removeAccepted();\n                  break;\n                case \"acceptedCircles\":\n                  data.srcElement.checked\n                    ? this.renderAcceptedCircles()\n                    : this.removeAcceptedCircles();\n                  break;\n\n                default:\n                  break;\n              }\n            }\n          },\n        },\n      })\n      .addTo(this.mapElement);\n  }\n\n  initEditableLayer() {\n    this.editableLayers = new window.L.FeatureGroup();\n    this.mapElement.addLayer(this.editableLayers);\n  }\n\n  initDrawControls() {\n    let drawPluginOptions = {\n      position: \"topright\",\n      draw: {\n        polygon: {\n          allowIntersection: false, // Restricts shapes to simple polygons\n          drawError: {\n            color: \"#e1e100\", // Color the shape will turn when intersects\n            message: \"<strong>Oh snap!<strong> you can't draw that!\", // Message that will show when intersect\n          },\n          shapeOptions: {\n            color: \"#97009c\",\n          },\n        },\n        // disable toolbar item by setting it to false\n        polyline: false,\n        circle: false, // Turns off this drawing tool\n        rectangle: false,\n        marker: false,\n      },\n      edit: {\n        featureGroup: this.editableLayers, //REQUIRED!!\n        remove: false,\n      },\n    };\n    this.drawControl = new window.L.Control.Draw(drawPluginOptions);\n  }\n\n  enablePolygonEditControl() {\n    const map = this.mapElement;\n\n    map.on(\"draw:created\", (e) => {\n      console.log(\"draw:created\");\n      const layer = e.layer;\n\n      this.setState({\n        editPolygonDetails: {\n          ...this.state.editPolygonDetails,\n          layer: layer,\n        },\n        currentPolygonsInView: [layer],\n      });\n\n      this.editableLayers.addLayer(layer);\n    });\n\n    map.on(\"draw:edited\", (e) => {\n      console.log(\"draw:edited\");\n      const layers = e.layers;\n      layers.eachLayer((layer) => {\n        this.setState({\n          editPolygonDetails: {\n            ...this.state.editPolygonDetails,\n            layer: layer,\n          },\n          currentPolygonsInView: [layer],\n        });\n      });\n    });\n\n    map.addControl(this.drawControl);\n  }\n\n  disablePolygonEditControl() {\n    if (this.drawControl) {\n      this.mapElement.removeControl(this.drawControl);\n    }\n  }\n\n  onLoad() {\n    return new Promise((resolve, reject) => {\n      const L = window.L;\n      const $ = window.$;\n      const config = window.config;\n      const loading = L.control({ position: \"bottomright\" }),\n        loaded = {\n          areas: false,\n          districts: false,\n          sectors: false,\n        },\n        geoJsonLayerOptions = {\n          style: config.shapeStyle,\n          onEachFeature: onEachFeature,\n        },\n        layerAreas = L.geoJson(null, geoJsonLayerOptions),\n        layerDistricts = L.geoJson(null, geoJsonLayerOptions),\n        layerSectors = L.geoJson(null, geoJsonLayerOptions),\n        layerGoogle = L.tileLayer(\n          \"http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}?key=AIzaSyC0AJcO-U5RksjP02AQHxEuFlEW5xSKzp8\",\n          {\n            maxZoom: 20,\n            subdomains: [\"mt0\", \"mt1\", \"mt2\", \"mt3\"],\n          }\n        ),\n        layerOSM = L.tileLayer(config.openStreetMap.url, {\n          // OpenStreetMap tile layer (default)\n          attribution: config.openStreetMap.attribution,\n          maxZoom: config.zoom.max,\n        }),\n        tileMaps = {\n          // Tile map layer switcher\n          \"Google Maps\": layerGoogle,\n          RAZRMAPS: layerOSM,\n        },\n        overlayMaps = {\n          // GeoJSON layer switcher\n          Areas: layerAreas,\n          Districts: layerDistricts,\n          Sectors: layerSectors,\n        },\n        map = L.map(\"map\", {\n          // Setup map object\n          center: [53.21919, -1.86768],\n          zoom: 7,\n          layers: [layerOSM],\n        });\n\n      const sidebar = L.control.sidebar(\"sidebar\", {\n        closeButton: true,\n        position: \"left\",\n      });\n      map.addControl(sidebar);\n\n      //expose some elements\n      this.sidebarElement = sidebar;\n      this.mapElement = map;\n\n      // Add layers control\n      L.control.layers(tileMaps, overlayMaps, { collapsed: false }).addTo(map);\n\n      this.initEditableLayer();\n      this.initDrawControls();\n\n      // For each feature, set random fill colour and bind 'name' label\n      function onEachFeature(feature, layer) {\n        layer.setStyle({ fillColor: randomColor() });\n        layer.bindLabel(feature.properties.name, { noHide: true });\n      }\n\n      function randomRange(min, max) {\n        return Math.floor(Math.random() * (max - min)) + min;\n      }\n\n      function randomColor() {\n        return (\n          \"rgb(\" +\n          randomRange(0, 256) +\n          \",\" +\n          randomRange(0, 256) +\n          \",\" +\n          randomRange(0, 256) +\n          \")\"\n        );\n      }\n\n      // Setup GeoJSON loading indicator and add to map\n      loading.onAdd = function () {\n        const div = L.DomUtil.create(\"div\", \"control loader\");\n\n        div.innerHTML = `\n              <div>\\\n                  Areas... <span id=\"loadAreas\">&#x21BB;</span><br>\n                  Districts... <span id=\"loadDistricts\">&#x21BB;</span><br>\n                  Sectors... <span id=\"loadSectors\">&#x21BB;</span>\n              </div>\n              `;\n\n        return div;\n      };\n      loading.addTo(map);\n\n      // Automatically set the GeoJSON layer depending on zoom level\n      // map.on(\"zoomend\", function() {\n      //   if (!(loaded.areas && loaded.districts && loaded.sectors)) {\n      //     return;\n      //   }\n\n      //   const zoom = map.getZoom();\n\n      //   if (\n      //     zoom >= config.zoom.areas &&\n      //     zoom < config.zoom.districts &&\n      //     !map.hasLayer(layerAreas)\n      //   ) {\n      //     map.removeLayer(layerDistricts);\n      //     map.removeLayer(layerSectors);\n      //     map.addLayer(layerAreas);\n      //   } else if (\n      //     zoom >= config.zoom.districts &&\n      //     zoom < config.zoom.sectors &&\n      //     !map.hasLayer(layerDistricts)\n      //   ) {\n      //     map.removeLayer(layerAreas);\n      //     map.removeLayer(layerSectors);\n      //     map.addLayer(layerDistricts);\n      //   } else if (zoom >= config.zoom.sectors && !map.hasLayer(layerSectors)) {\n      //     map.removeLayer(layerAreas);\n      //     map.removeLayer(layerDistricts);\n      //     map.addLayer(layerSectors);\n      //   }\n      // });\n\n      // Load postcode Areas GeoJSON file\n      $.getJSON(config.files.areas, function (data) {\n        // Add loaded GeoJSON data to layer\n        layerAreas.addData(data.features);\n\n        // Show Areas layer by default\n        map.addLayer(layerAreas);\n\n        loaded.areas = true;\n        $(\"#loadAreas\").html(\"&#x2713;\");\n      }).error(function (error) {\n        console.error(\n          \"Failed loading '\" + config.files.areas + \"'\",\n          \"Error: \" + error.statusText\n        );\n\n        $(\"#loadAreas\").html(\"&#x2717;\");\n      });\n\n      // Load postcode Districts GeoJSON file\n      $.getJSON(config.files.districts, function (data) {\n        // Add loaded GeoJSON data to layer\n        layerDistricts.addData(data.features);\n\n        loaded.districts = true;\n        $(\"#loadDistricts\").html(\"&#x2713;\");\n      }).error(function (error) {\n        console.error(\n          \"Failed loading '\" + config.files.districts + \"'\",\n          \"Error: \" + error.statusText\n        );\n\n        $(\"#loadDistricts\").html(\"&#x2717;\");\n      });\n\n      // Load postcode Sectors GeoJSON file\n      $.getJSON(config.files.sectors, function (data) {\n        // Add loaded GeoJSON data to layer\n        layerSectors.addData(data.features);\n\n        loaded.sectors = true;\n        $(\"#loadSectors\").html(\"&#x2713;\");\n      }).error(function (error) {\n        console.error(\n          \"Failed loading '\" + config.files.sectors + \"'\",\n          \"Error: \" + error.statusText\n        );\n\n        $(\"#loadSectors\").html(\"&#x2717;\");\n      });\n      resolve();\n    });\n  }\n\n  showSideBar() {\n    this.sidebarElement.show();\n  }\n\n  hideSideBar() {\n    this.sidebarElement.hide();\n  }\n}\n\nexport { Map };\n","export function authHeader() {\n    // return authorization header with basic auth credentials\n    let user = JSON.parse(localStorage.getItem('user'));\n\n    if (user && user.authdata) {\n        return { 'Authorization': 'Basic ' + user.authdata };\n    } else {\n        return {};\n    }\n}","import { authHeader } from '../_helpers';\n\nexport const userService = {\n    login,\n    logout,\n    getAll\n};\n\nfunction login(username, password) {\n    const requestOptions = {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ username, password })\n    };\n\n    return fetch(`/users/authenticate`, requestOptions)\n        .then(handleResponse)\n        .then(user => {\n            // login successful if there's a user in the response\n            if (user) {\n                // store user details and basic auth credentials in local storage \n                // to keep user logged in between page refreshes\n                user.authdata = window.btoa(username + ':' + password);\n                localStorage.setItem('user', JSON.stringify(user));\n            }\n\n            return user;\n        });\n}\n\nfunction logout() {\n    // remove user from local storage to log user out\n    localStorage.removeItem('user');\n}\n\nfunction getAll() {\n    const requestOptions = {\n        method: 'GET',\n        headers: authHeader()\n    };\n\n    return fetch(`/users`, requestOptions).then(handleResponse);\n}\n\nfunction handleResponse(response) {\n    return response.text().then(text => {\n        const data = text && JSON.parse(text);\n        if (!response.ok) {\n            if (response.status === 401) {\n                // auto logout if 401 response returned from api\n                logout();\n                window.location.reload(true);\n            }\n\n            const error = (data && data.message) || response.statusText;\n            return Promise.reject(error);\n        }\n\n        return data;\n    });\n}","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport { userService } from \"../_services\";\n\nimport { Map } from \"../_components\";\n\nclass HomePage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      user: {},\n      users: []\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      user: JSON.parse(localStorage.getItem(\"user\")),\n      users: { loading: true }\n    });\n    userService.getAll().then(users => this.setState({ users }));\n  }\n\n  render() {\n    const { user, users } = this.state;\n    return <Map />;\n  }\n}\n\nexport { HomePage };\n","import React from \"react\";\n\nimport { userService } from \"../_services\";\n\nimport \"./LoginPage.css\";\n\nclass LoginPage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    userService.logout();\n\n    this.state = {\n      username: \"\",\n      password: \"\",\n      submitted: false,\n      loading: false,\n      error: \"\"\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(e) {\n    const { name, value } = e.target;\n    this.setState({ [name]: value });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n\n    this.setState({ submitted: true });\n    const { username, password, returnUrl } = this.state;\n\n    // stop here if form is invalid\n    if (!(username && password)) {\n      return;\n    }\n\n    this.setState({ loading: true });\n    userService.login(username, password).then(\n      user => {\n        const { from } = this.props.location.state || {\n          from: { pathname: \"/\" }\n        };\n        this.props.history.push(from);\n      },\n      error => this.setState({ error, loading: false })\n    );\n  }\n\n  render() {\n    const { username, password, submitted, loading, error } = this.state;\n\n    // return (\n    //   <div className=\"login-page\">\n    //     <div className=\"form\">\n    //       <form className=\"register-form\" onSubmit={this.handleSubmit}>\n    //         <input\n    //           type=\"text\"\n    //           className=\"form-control\"\n    //           name=\"username\"\n    //           value={username}\n    //           onChange={this.handleChange}\n    //         />\n    //         <input\n    //           type=\"password\"\n    //           className=\"form-control\"\n    //           name=\"password\"\n    //           value={password}\n    //           onChange={this.handleChange}\n    //         />\n    //       </form>\n    //       <form className=\"login-form\">\n    //         <input type=\"text\" placeholder=\"username\" />\n    //         <input type=\"password\" placeholder=\"password\" />\n    //         <div className=\"form-group\">\n    //           <button className=\"btn btn-primary\" disabled={loading}>\n    //             Login\n    //           </button>\n    //           {loading && (\n    //             <img src=\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\" />\n    //           )}\n    //         </div>\n    //         {error && <div className={\"alert alert-danger\"}>{error}</div>}\n    //         <p className=\"message\">\n    //           This is a private page. If you're not supposed to be here, walk\n    //           away now!\n    //         </p>\n    //       </form>\n    //     </div>\n    //   </div>\n    // );\n\n    return (\n      <div className=\"login-page\">\n        <div className=\"form\">\n          <h2>Map Analyzer</h2>\n          <form name=\"form\" onSubmit={this.handleSubmit}>\n            <div\n              className={\n                \"form-group\" + (submitted && !username ? \" has-error\" : \"\")\n              }\n            >\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                name=\"username\"\n                value={username}\n                onChange={this.handleChange}\n                placeholder=\"Username\"\n              />\n              {submitted && !username && (\n                <div className=\"help-block\">Username is required</div>\n              )}\n            </div>\n            <div\n              className={\n                \"form-group\" + (submitted && !password ? \" has-error\" : \"\")\n              }\n            >\n              <input\n                type=\"password\"\n                className=\"form-control\"\n                name=\"password\"\n                value={password}\n                onChange={this.handleChange}\n                placeholder=\"Password\"\n              />\n              {submitted && !password && (\n                <div className=\"help-block\">Password is required</div>\n              )}\n            </div>\n            <div className=\"form-group\">\n              <button className=\"btn btn-primary\" disabled={loading}>\n                Login\n              </button>\n              {loading && (\n                <img src=\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\" />\n              )}\n            </div>\n            {error && <div className={\"alert alert-danger\"}>{error}</div>}\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport { LoginPage };\n","import React from \"react\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\n\nimport { PrivateRoute } from \"../_components\";\nimport { HomePage } from \"../HomePage\";\nimport { LoginPage } from \"../LoginPage\";\n\nclass App extends React.Component {\n  render() {\n    return (\n      // <div className=\"jumbotron\">\n      //     <div className=\"container\">\n      //         <div className=\"col-sm-8 col-sm-offset-2\">\n      <Router>\n        <div>\n          <PrivateRoute exact path=\"/\" component={HomePage} />\n          <Route path=\"/login\" component={LoginPage} />\n        </div>\n      </Router>\n      //         </div>\n      //     </div>\n      // </div>\n    );\n  }\n}\n\nexport { App };\n","export function configureFakeBackend() {\n  let users = [\n    {\n      id: 1,\n      username: \"meerim\",\n      password: \"meerimTester\",\n      firstName: \"Test\",\n      lastName: \"User\",\n    },\n  ];\n  let realFetch = window.fetch;\n  window.fetch = function (url, opts) {\n    return new Promise((resolve, reject) => {\n      // wrap in timeout to simulate server api call\n      setTimeout(() => {\n        // authenticate\n        if (url.endsWith(\"/users/authenticate\") && opts.method === \"POST\") {\n          // get parameters from post request\n          let params = JSON.parse(opts.body);\n\n          // find if any user matches login credentials\n          let filteredUsers = users.filter((user) => {\n            return (\n              user.username === params.username &&\n              user.password === params.password\n            );\n          });\n\n          if (filteredUsers.length) {\n            // if login details are valid return user details\n            let user = filteredUsers[0];\n            let responseJson = {\n              id: user.id,\n              username: user.username,\n              firstName: user.firstName,\n              lastName: user.lastName,\n            };\n            resolve({\n              ok: true,\n              text: () => Promise.resolve(JSON.stringify(responseJson)),\n            });\n          } else {\n            // else return error\n            reject(\"Username or password is incorrect\");\n          }\n\n          return;\n        }\n\n        // get users\n        if (url.endsWith(\"/users\") && opts.method === \"GET\") {\n          // check for fake auth token in header and return users if valid, this security\n          // is implemented server side in a real application\n          if (\n            opts.headers &&\n            opts.headers.Authorization ===\n              `Basic ${window.btoa(\"meerim:meerimTester\")}`\n          ) {\n            resolve({\n              ok: true,\n              text: () => Promise.resolve(JSON.stringify(users)),\n            });\n          } else {\n            // return 401 not authorised if token is null or invalid\n            resolve({ status: 401, text: () => Promise.resolve() });\n          }\n\n          return;\n        }\n\n        // pass through any requests not handled above\n        realFetch(url, opts).then((response) => resolve(response));\n      }, 500);\n    });\n  };\n}\n","import React from \"react\";\nimport { render } from \"react-dom\";\n\nimport { App } from \"./App\";\n\n// setup fake backend\nimport { configureFakeBackend } from \"./_helpers\";\nconfigureFakeBackend();\nrender(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}